import Modal from"./components/Modal";const modalAlert=new Modal(".modal");import{COUNT,CLEAR,GET,SET}from"../utils/helpers";export default class Modal{constructor(t){this.count=0,this.counter=document.querySelector(".modal__clicked-info"),this.resetBtn=document.querySelector(".button--reset"),this.modal=document.querySelector([t]),this.btnModalHandler(),this.getClickTarget(),this.resetBtnHandler(),this.handleLocalStorage()}modalVisibilityHandler(){this.modal.classList.toggle("modal__hidden")}btnModalHandler(){const t=document.querySelector(".button--modal");t.addEventListener("click",()=>{this.modalVisibilityHandler(),this.incrementCounter()})}getClickTarget(){this.modal.addEventListener("click",t=>{this.handleClickTarget(t)})}handleClickTarget(t){const e=t["target"];!e.closest(".modal__exit-icon")&&null!==e.closest(".modal__wrapper")||this.modalVisibilityHandler()}incrementCounter(){this.count++,this.useStorage(SET),this.counter.textContent=this.count+" times",5<this.count?this.resetBtn.classList.remove("button__hidden"):this.resetBtn.classList.add("button__hidden")}resetBtnHandler(){this.resetBtn.addEventListener("click",()=>{this.count=0,this.modalVisibilityHandler()})}handleLocalStorage(){null===localStorage.getItem(COUNT)?this.useStorage(SET):this.useStorage(GET)}useStorage(t){switch(t){case GET:const e=JSON.parse(localStorage.getItem(COUNT));this.count=e;break;case CLEAR:this.count=0,e=localStorage.setItem(COUNT,JSON.stringify(this.count));break;case SET:localStorage.setItem(COUNT,JSON.stringify(this.count))}}}const COUNT="COUNT",CLEAR="CLEAR",GET="GET",SET="SET";export{CLEAR,GET,COUNT,SET};