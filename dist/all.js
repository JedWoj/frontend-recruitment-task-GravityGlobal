import Modal from"./components/Modal";const modalAlert=new Modal("modalAlert","button--modal","button--reset");import{COUNT,CLEAR,GET,SET}from"../utils/helpers";export default class Modal{constructor(t,e,o){this.count=0,this.modal=document.querySelector("."+[t]),this.counter=document.querySelector(`.${[t]}__count`),this.resetBtn=document.querySelector("."+[o]),this.mountingComponent(e)}mountingComponent(t){this.btnModalHandler(t),this.handleLocalStorage(),this.getClickTarget(),this.resetBtnHandler()}modalVisibilityHandler(){this.modal.classList.toggle("modal__hidden")}btnModalHandler(t){const e=document.querySelector("."+[t]);e.addEventListener("click",()=>{this.modalVisibilityHandler(),this.incrementCounter()})}getClickTarget(){this.modal.addEventListener("click",t=>{this.handleClickTarget(t)})}handleClickTarget(t){const e=t["target"];!e.closest(".modal__exit-icon")&&e.closest(".modal__wrapper")||this.modalVisibilityHandler()}incrementCounter(){this.count++,this.useStorage(SET),this.counter.textContent=this.count+" times",5<this.count?this.resetBtn.classList.remove("button__hidden"):this.resetBtn.classList.add("button__hidden")}resetBtnHandler(){this.resetBtn.addEventListener("click",this.resetCounter.bind(this))}resetCounter(){this.useStorage(CLEAR),this.modalVisibilityHandler()}handleLocalStorage(){null===localStorage.getItem(COUNT)?this.useStorage(SET):this.useStorage(GET)}useStorage(t){switch(t){case GET:var e=JSON.parse(localStorage.getItem(COUNT));this.count=e;break;case CLEAR:this.count=0,localStorage.setItem(COUNT,JSON.stringify(this.count));break;case SET:localStorage.setItem(COUNT,JSON.stringify(this.count))}}}const COUNT="COUNT",CLEAR="CLEAR",GET="GET",SET="SET";export{CLEAR,GET,COUNT,SET};